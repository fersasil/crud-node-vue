webpackJsonp([1],{"1uuo":function(e,t){},"6Abs":function(e,t){},"9M+g":function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[a("b-navbar-brand",{attrs:{to:"home"}},[e._v("CRUD")]),e._v(" "),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),e._v(" "),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[e.userLoggedIn?e._e():a("b-navbar-nav",[a("b-nav-item",{attrs:{"active-class":"active",to:{name:"login"}}},[e._v("Login")]),e._v(" "),a("b-nav-item",{attrs:{"active-class":"active",to:{name:"register"}}},[e._v("Register")])],1),e._v(" "),e.userLoggedIn?a("b-navbar-nav",[a("b-nav-item",{attrs:{"active-class":"active",to:{name:"allUsers"}}},[e._v("All Users")]),e._v(" "),a("b-nav-item",{attrs:{"active-class":"active",to:{name:"register"}}},[e._v("Test")])],1):e._e(),e._v(" "),a("b-navbar-nav",{staticClass:"ml-auto"},[e.userLoggedIn?a("b-nav-item-dropdown",{attrs:{right:""}},[a("template",{slot:"button-content"},[a("em",[e._v(e._s(e.username))])]),e._v(" "),a("b-dropdown-item",{attrs:{to:{name:"UserProfile",params:{userId:e.userId}}}},[e._v("Profile")]),e._v(" "),a("b-dropdown-item",{attrs:{href:"#"},on:{click:e.signOut}},[e._v("Sign Out")])],2):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var s={name:"App",components:{AppNavBar:a("VU/8")({computed:{userLoggedIn:function(){return this.$store.getters.userLoggedIn},username:function(){return this.$store.getters.getUserName},userId:function(){return this.$store.getters.getUserId}},methods:{signOut:function(){this.$store.dispatch("logout")}}},r,!1,function(e){a("v/Ym")},null,null).exports},created:function(){this.$store.dispatch("isLoggedIn")}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("app-nav-bar"),this._v(" "),t("b-container",{attrs:{id:"app"}},[t("router-view")],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,i,!1,function(e){a("6Abs")},null,null).exports,l=a("/ocq"),u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._v(" "),a("h2",[e._v("Essential Links")]),e._v(" "),e._m(0),e._v(" "),a("h2",[e._v("Ecosystem")]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[e._v("\n        Core Docs\n      ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[e._v("\n        Forum\n      ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[e._v("\n        Community Chat\n      ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[e._v("\n        Twitter\n      ")])]),e._v(" "),a("br"),e._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[e._v("\n        Docs for This Template\n      ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var c=a("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},u,!1,function(e){a("1uuo")},"data-v-d8ec41bc",null).exports,m={render:function(){var e=this.$createElement;return(this._self._c||e)("h1",[this._v("Dashboard")])},staticRenderFns:[]};var d=a("VU/8")({},m,!1,function(e){a("tU1m")},null,null).exports,h=a("mtWM"),v=a.n(h),f={"Content-Type":"application/json"},p=v.a.create({baseURL:"http://131.108.54.142:3000/",headers:f}),b=v.a.create({baseURL:"http://131.108.54.142:3000/api/user",headers:f}),g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.errors.length?a("p",[a("b-alert",{attrs:{variant:"warning",show:""}},[a("b",[e._v("Por favor, corrija o(s) seguinte(s) erro(s):")]),e._v(" "),a("ul",[a("b-row",e._l(e.errors,function(t,n){return a("p",{key:n},[e._v(e._s(t.error))])}),0)],1)])],1):e._e(),e._v(" "),a("b-card",{staticStyle:{"max-width":"75rem"},attrs:{title:"Login"}},[a("div",{staticClass:"w-50 mx-auto"},[a("b-form-input",{staticClass:"mb-4 mt-4",attrs:{placeholder:"Enter your email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("b-form-input",{staticClass:"mb-4",attrs:{placeholder:"Enter your password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("b-button",{on:{click:e.fetchData}},[e._v("Login")])],1)])],1)},staticRenderFns:[]};var _=a("VU/8")({data:function(){return{email:"",password:"",token:"",errors:[],success:""}},methods:{fetchData:function(){this.errors=[],this.success=!1;var e={email:this.email,password:this.password};this.$store.dispatch("login",e)}}},g,!1,function(e){a("cBw8")},"data-v-e72022d6",null).exports,k=a("Gu7T"),I=a.n(k),w={data:function(){return{names:[]}},methods:{},created:function(){var e=this;p.get("/users/u").then(function(t){var a=[].concat(I()(t.data)),n=[];for(var r in a)n.push({name:a[r].name,id:a[r].id});e.names=n})}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-col",{attrs:{md:"6"}},[a("h1",[e._v("Users")])])],1),e._v(" "),a("b-col",{attrs:{md:"6"}},[a("b-list-group",e._l(e.names,function(t,n){return a("b-list-group-item",{key:n},[e._v("ID: "+e._s(t.id)+" Name: "+e._s(t.name))])}),1)],1)],1)],1)},staticRenderFns:[]},x=a("VU/8")(w,E,!1,null,null,null).exports,U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{method:"POST"},on:{submit:e.fetchData}},[e.errors.length?a("p",[a("b-alert",{attrs:{variant:"warning",show:""}},[a("b",[e._v("Por favor, corrija o(s) seguinte(s) erro(s):")]),e._v(" "),a("ul",e._l(e.errors,function(t,n){return a("li",{key:n},[e._v(e._s(t.error))])}),0)])],1):e._e(),e._v(" "),a("b-form-input",{staticClass:"mb-4",attrs:{placeholder:"Enter your name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("b-form-input",{staticClass:"mb-4",attrs:{placeholder:"Enter your email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("b-form-input",{attrs:{placeholder:"Enter your password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("hr"),e._v(" "),a("b-button",{on:{click:e.fetchData}},[e._v("Register")])],1)},staticRenderFns:[]};var N=a("VU/8")({data:function(){return{name:"",password:"",email:"",errors:[],success:""}},methods:{fetchData:function(e){if(e.preventDefault(),this.errors=[],this.success=!1,""===this.name)this.errors.push("O nome do produto é obrigatório.");else{var t={name:this.name,password:this.password,email:this.email};this.$store.dispatch("signup",t)}}}},U,!1,function(e){a("dTq6")},null,null).exports,T={data:function(){return{name:"",email:"",errors:[],stateEmail:!1,stateName:!1,defaultName:"",defaultEmail:""}},computed:{invalidFeedbackName:function(){return this.stateName=!1,0===this.name.length?"Please enter something":this.name.length<4?"Enter at least 4 characters":void(this.name!==this.defaultName&&(this.stateName=!0))},invalidFeedbackEmail:function(){return this.stateEmail=!1,0===this.email.length?(this.stateEmail=!1,"Please enter something"):this.email.length<4?(this.stateEmail=!1,"Enter at least 4 characters"):void(this.email!==this.defaultEmail&&(this.stateEmail=!0))},validFeedbackEmail:function(){return!0===this.stateEmail?"Thank you":""},validFeedbackName:function(){return!0===this.stateName?"Thank you":""},buttonAvaliable:function(){return this.stateEmail||this.stateName?"":"disabled"}},methods:{fetchData:function(){var e=this;if(this.stateName||this.stateEmail){b.defaults.headers.Authorization="Bearer: "+this.$store.getters.getToken;var t={id:this.$store.getters.getUserId,name:this.name!==this.defaultName?this.name:"",email:this.email!==this.defaultEmail?this.email:""};b.put("update-user-profile",t).then(function(t){if(t.data.updated){if(e.name!==e.defaultName){var a={name:e.name};e.$store.dispatch("updateUser",a)}e.stateEmail=!1,e.stateName=!1,e.defaultName=e.name,e.defaultEmail=e.email,alert("Dados alterados com sucesso")}else alert("Algum erro estranho ocorreu")}).catch(function(e){console.log(e)})}}},created:function(){var e=this;b.defaults.headers.Authorization="Bearer: "+this.$store.getters.getToken,b.get("profile-info").then(function(t){e.name=t.data.name,e.email=t.data.email,e.defaultName=t.data.name,e.defaultEmail=t.data.email}).catch(function(e){console.log(e)})}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("b-form-group",{staticStyle:{"max-width":"40rem"},attrs:{"label-cols-sm":"4","label-cols-lg":"3",description:"Edit this field if you want.",label:"Enter your email","label-for":"input-horizontal","invalid-feedback":e.invalidFeedbackEmail,"valid-feedback":e.validFeedbackEmail,state:e.stateEmail}},[a("b-form-input",{attrs:{id:"input-horizontal"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),e._v(" "),a("div",[a("b-form-group",{staticStyle:{"max-width":"40rem"},attrs:{"label-cols-sm":"4","label-cols-lg":"3",label:"Enter your name","label-for":"input-horizontal","invalid-feedback":e.invalidFeedbackName,"valid-feedback":e.validFeedbackName,state:e.stateName}},[a("b-form-input",{attrs:{id:"input-horizontal"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),e._v(" "),a("b-form-group",{staticStyle:{"max-width":"40rem"}},[a("b-button",{class:e.buttonAvaliable,on:{click:e.fetchData}},[e._v("Edit")])],1)],1)},staticRenderFns:[]};var $=a("VU/8")(T,D,!1,function(e){a("e13I")},null,null).exports,y={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]};var F=a("VU/8")({},y,!1,function(e){a("UcIO")},null,null).exports,L={render:function(){var e=this.$createElement;return(this._self._c||e)("h1",[this._v("Page Not Found")])},staticRenderFns:[]};var R=a("VU/8")({},L,!1,function(e){a("YXM0")},null,null).exports,j=a("mvHQ"),A=a.n(j),S=a("NYxO"),C=function(e){var t,a;e.expiresIn=(t=e.expiresIn,a=(new Date).getTime()+1e3*t,console.log(),new Date(a));var n=btoa(A()(e));localStorage.setItem("data",n)};n.default.use(S.a);var O=new S.a.Store({state:{idToken:null,userId:null,userName:null},mutations:{authUser:function(e,t){e.idToken=t.idToken,e.userId=t.userId,e.userName=t.userName},wipeUserInfo:function(e){e.idToken=null,e.userId=null,e.userName=null,e.userInfo=null},saveUser:function(e,t){e.userInfo=t},updateUser:function(e,t){e.userName=t.name}},actions:{updateUser:function(e,t){(0,e.commit)("updateUser",t)},isLoggedIn:function(e){var t=e.commit,a=localStorage.getItem("data");if(a){var n=atob(a),r=JSON.parse(n);r.expiresIn=new Date(r.expiresIn),new Date>=r.expiresIn||t("authUser",r)}},setLogoutTimer:function(e,t){var a=e.dispatch;setTimeout(function(e){a("logout")},1e3*t)},signup:function(e,t){var a=this,n=e.commit,r=e.dispatch;p.post("create",t).then(function(e){if(e.data.success)a.errors.push({error:"Email"});else{var t={idToken:e.data.token,userName:e.data.name,userId:e.data.userId};n("authUser",t),z.push({name:"Dashboard"}),r("setLogoutTimer",e.data.expiresIn),t.expiresIn=e.data.expiresIn,C(t)}}).catch(function(e){})},login:function(e,t){var a=e.commit,n=e.dispatch;p.post("login",t).then(function(e){var t={idToken:e.data.token,userName:e.data.name,userId:e.data.userId};a("authUser",t),z.push({name:"Dashboard"}),n("setLogoutTimer",e.data.expiresIn),t.expiresIn=e.data.expiresIn,C(t)}).catch(function(e){})},logout:function(e){(0,e.commit)("wipeUserInfo"),localStorage.removeItem("data"),z.replace({name:"Home"})}},getters:{userLoggedIn:function(e){return!!e.userId},getUserName:function(e){return e.userName},getUserId:function(e){return e.userId},getToken:function(e){return console.log(),e.idToken}}}),V=function(e){var t=localStorage.getItem("data");if(!t)return!1;var a=atob(t),n=JSON.parse(a);return n.expiresIn=new Date(n.expiresIn),n},P=function(e,t,a){if(O.state.idToken)a({name:"Dashboard"});else{var n=V();if(n)new Date>=n.expiresIn?a():a({name:"Dashboard"});else a()}};n.default.use(l.a);var z=new l.a({routes:[{path:"/",name:"HelloWorld",component:c,beforeEnter:P},{path:"/login",name:"login",component:_,beforeEnter:P},{path:"/register",name:"register",component:N,beforeEnter:P},{path:"/u",component:F,beforeEnter:function(e,t,a){if(O.state.idToken)a();else{var n=V();n?new Date>=n.expiresIn?a({name:"login"}):a():a({name:"login"})}},children:[{path:"/",name:"Dashboard",component:d},{path:"all-users",component:x,name:"allUsers"},{path:"profile/:userId",component:$,name:"UserProfile"}]},{path:"*",component:R}]}),H=a("Tqaz");a("Jmt5"),a("9M+g");n.default.use(H.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:z,components:{App:o},template:"<App/>",store:O})},UcIO:function(e,t){},YXM0:function(e,t){},cBw8:function(e,t){},dTq6:function(e,t){},e13I:function(e,t){},tU1m:function(e,t){},"v/Ym":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5b0686373565d57c043e.js.map